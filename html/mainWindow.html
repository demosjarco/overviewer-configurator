<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Overviewer Config</title>
<meta name="theme-color" content="#36b030" />
<link rel="stylesheet" href="../css/main.css" type="text/css" />
</head>

<body id="tabs">
	<aside>
		<ul>
			<li><a href="#tabs-1"><img src="../img/overviewerLogo.png" /></a></li>
			<li><a class="worlds" href="#tabs-2">[w1]</a></li>
			<li><a class="worlds" href="#tabs-3">[w2]</a></li>
		</ul>
	</aside>
	<main>
		<div id="tabs-1">
			<img src="../img/overviewerLogo.png" />
			<h1>Overviewer</h1><br />
			<table>
				<tr>
					<td>Version:</td>
					<td><span id="ovVersion">Loading...</span> (Latest: <span id="latestOvVersion">Loading...</span>)</td>
				</tr>
				<tr>
					<td>App Config File:</td>
					<td id="appConfLocation">Loading...</td>
				</tr>
				<tr>
					<td>OV Config File:</td>
					<td id="ovConfLocation">Loading...</td>
				</tr>
			</table>
			<div id="cpu">
				<span>CPU</span>
				<div id="cpuHistory">
					<div id="cpu1" class="progressBar">
						<div class="progressBarInside"></div>
					</div>
					<div id="cpu2" class="progressBar">
						<div class="progressBarInside"></div>
					</div>
					<div id="cpu3" class="progressBar">
						<div class="progressBarInside"></div>
					</div>
					<div id="cpu4" class="progressBar">
						<div class="progressBarInside"></div>
					</div>
					<div id="cpu5" class="progressBar">
						<div class="progressBarInside"></div>
					</div>
				</div>
			</div>
			<div id="ram">
				<span>RAM</span>
				<div id="ramHistory">
					<div id="ram1" class="progressBar">
						<div class="progressBarInside"></div>
					</div>
					<div id="ram2" class="progressBar">
						<div class="progressBarInside"></div>
					</div>
					<div id="ram3" class="progressBar">
						<div class="progressBarInside"></div>
					</div>
					<div id="ram4" class="progressBar">
						<div class="progressBarInside"></div>
					</div>
					<div id="ram5" class="progressBar">
						<div class="progressBarInside"></div>
					</div>
				</div>
			</div>
			<br />
			<div id="tabs1-content">
				<ul id="tabs1">
					<li><a href="#tabs1-1">Global Config</a></li>
					<li><a href="#tabs1-2">Test</a></li>
				</ul>
				<div id="tabs1-1">
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Odio quidem, libero beatae dolorum possimus officia numquam repellat, sint, quam similique ipsa molestias perspiciatis vitae. Dolores eius sequi ex minus voluptates!</p>
				</div>
				<div id="tabs1-2">
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cupiditate voluptatum ut quas error vero, doloribus vitae reprehenderit beatae deserunt quasi, nihil, sunt suscipit dolorum nostrum voluptatibus quis quam nemo illum.</p>
				</div>
			</div>
		</div>
		<div id="tabs-2">
			<p>Nesciunt cumque maiores hic suscipit, ex nostrum ratione corporis perspiciatis neque inventore unde, possimus quas! Assumenda aliquam distinctio magni necessitatibus corrupti. Illo nobis ut voluptatum totam possimus dicta reiciendis consequuntur?</p>
		</div>
		<div id="tabs-3">
			<p>Placeat amet, facere consequatur! Facilis delectus in fugiat animi ratione aliquam voluptatum error, pariatur id nulla ipsam unde dignissimos recusandae fuga. Dicta laborum tempore, voluptatibus impedit asperiores in? Quos, maxime?</p>
		</div>
	</main>
	<script>window.$ = window.jQuery = require('jquery');</script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
	<script>
		const { ipcRenderer } = require('electron');
		
		$('aside ul li').height($(window).width() * 0.05);
		$('aside ul li').css('line-height', ($(window).width() * 0.05) + 'px');
		$(window).on('resize', function () {
			$('aside ul li').height($(this).width() * 0.05);
			$('aside ul li').css('line-height', ($(this).width() * 0.05) + 'px');
		}).resize();
		$("#tabs").tabs();
		$("#tabs1-content").tabs();
		
		// Overviewer Tab
		ipcRenderer.send('getOverviewerVersion');
		ipcRenderer.on('gotOverviewerVersion', function (event, version) {
			$('span#ovVersion').text(version);
		});
		ipcRenderer.send('getLatestOverviewerVersion');
		ipcRenderer.on('gotLatestOverviewerVersion', function (event, version) {
			$('span#latestOvVersion').text(version);
			if ($('span#ovVersion').text() != $('span#latestOvVersion').text()) {
				$('span#ovVersion').css('color', '#ef9a9a');
				$('span#latestOvVersion').css('color', '#a5d6a7');
			}
		});

		const si = require('systeminformation');
		setInterval(function () {
			si.cpuCurrentspeed().then(data => {
				$('div#cpuHistory div#cpu5 div.progressBarInside').css('height', $('div#cpuHistory div#cpu4 div.progressBarInside').css('height'));
				$('div#cpuHistory div#cpu4 div.progressBarInside').css('height', $('div#cpuHistory div#cpu3 div.progressBarInside').css('height'));
				$('div#cpuHistory div#cpu3 div.progressBarInside').css('height', $('div#cpuHistory div#cpu2 div.progressBarInside').css('height'));
				$('div#cpuHistory div#cpu2 div.progressBarInside').css('height', $('div#cpuHistory div#cpu1 div.progressBarInside').css('height'));
				$('div#cpuHistory div#cpu1 div.progressBarInside').css('height', data.avg + '%');
			});

			si.mem().then(data => {
				$('div#ramHistory div#ram5 div.progressBarInside').css('height', $('div#ramHistory div#ram4 div.progressBarInside').css('height'));
				$('div#ramHistory div#ram4 div.progressBarInside').css('height', $('div#ramHistory div#ram3 div.progressBarInside').css('height'));
				$('div#ramHistory div#ram3 div.progressBarInside').css('height', $('div#ramHistory div#ram2 div.progressBarInside').css('height'));
				$('div#ramHistory div#ram2 div.progressBarInside').css('height', $('div#ramHistory div#ram1 div.progressBarInside').css('height'));
				$('div#ramHistory div#ram1 div.progressBarInside').css('height', (data.active / data.total)*100 + '%');
			});
		}, 1000);
</script>
</body>
</html>